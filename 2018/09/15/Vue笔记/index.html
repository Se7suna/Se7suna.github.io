<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.4.1" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico?v=6.4.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=6.4.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=6.4.1">










<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.4.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="VueVue基础MVVMMVVM是前端视图层的分层开发思想, 每个页面分成了M  V和VM 使用 MVVM 可以使 开发更加便捷, 因为VM提供了数据的双向绑定  Model:  模型, 保存的是每个页面中的数据 ViewModel:  视图模型, Vue的实例. 它是调度者分割了 M 和 V, 每当 V 层想要获取/保存数据的时候都要由 VM 做中间的处理 View:  视图, 每个页面中的HT">
<meta name="keywords" content="自学笔记,vue">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue笔记">
<meta property="og:url" content="https://consolelog.wang/2018/09/15/Vue笔记/index.html">
<meta property="og:site_name" content="无聊大作战">
<meta property="og:description" content="VueVue基础MVVMMVVM是前端视图层的分层开发思想, 每个页面分成了M  V和VM 使用 MVVM 可以使 开发更加便捷, 因为VM提供了数据的双向绑定  Model:  模型, 保存的是每个页面中的数据 ViewModel:  视图模型, Vue的实例. 它是调度者分割了 M 和 V, 每当 V 层想要获取/保存数据的时候都要由 VM 做中间的处理 View:  视图, 每个页面中的HT">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-09-15T22:47:59.022Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Vue笔记">
<meta name="twitter:description" content="VueVue基础MVVMMVVM是前端视图层的分层开发思想, 每个页面分成了M  V和VM 使用 MVVM 可以使 开发更加便捷, 因为VM提供了数据的双向绑定  Model:  模型, 保存的是每个页面中的数据 ViewModel:  视图模型, Vue的实例. 它是调度者分割了 M 和 V, 每当 V 层想要获取/保存数据的时候都要由 VM 做中间的处理 View:  视图, 每个页面中的HT">






  <link rel="canonical" href="https://consolelog.wang/2018/09/15/Vue笔记/">



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Vue笔记 | 无聊大作战</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">无聊大作战</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>搜索</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://consolelog.wang/2018/09/15/Vue笔记/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="无聊大作战">
      <meta itemprop="description" content="半路出家，自学前端半年">
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="无聊大作战">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Vue笔记
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2018-09-15 23:32:32" itemprop="dateCreated datePublished" datetime="2018-09-15T23:32:32+08:00">2018-09-15</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2018-09-16 06:47:59" itemprop="dateModified" datetime="2018-09-16T06:47:59+08:00">2018-09-16</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/Vue/" itemprop="url" rel="index"><span itemprop="name">Vue</span></a></span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Vue"><a href="#Vue" class="headerlink" title="Vue"></a>Vue</h1><h2 id="Vue基础"><a href="#Vue基础" class="headerlink" title="Vue基础"></a>Vue基础</h2><h3 id="MVVM"><a href="#MVVM" class="headerlink" title="MVVM"></a>MVVM</h3><p>MVVM是前端视图层的分层开发思想, 每个页面分成了M  V和VM</p>
<p>使用 MVVM 可以使 开发更加便捷, 因为VM提供了数据的双向绑定</p>
<ul>
<li>Model:  模型, 保存的是每个页面中的数据</li>
<li>ViewModel:  视图模型, Vue的实例. 它是调度者分割了 M 和 V, 每当 V 层想要获取/保存数据的时候都要由 VM 做中间的处理</li>
<li>View:  视图, 每个页面中的HTML结构</li>
</ul>
<a id="more"></a>
<h3 id="模板"><a href="#模板" class="headerlink" title="模板"></a>模板</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Vue的实例 控制该元素内部的内容 (V)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 通过Vue指令将数据渲染到页面上 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-cloak 可以解决 插值表达式闪烁问题 它需要样式配合--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- [v-cloak] &#123; display: none &#125; --&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 插值表达式里面的是 js 代码 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-cloak</span>&gt;</span> &#123; &#123; msg &#125; &#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-text 默认没有闪烁问题 但数据会完全覆盖标签里的内容 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-text</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-html 也会覆盖内容 它会将数据当作 html来渲染 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span> <span class="attr">v-html</span>=<span class="string">"htmlTest"</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-bind 是用于绑定 属性的指令, 绑定后会把属性的值当作js表达式来解析 (简写 : )--&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-on 是用于绑定 事件的指令, 可以为DOM元素 绑定methods中的事件 (简写 @)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"按钮"</span> <span class="attr">v-bind:title</span>=<span class="string">"mytitle + '简写 :' "</span> <span class="attr">v-on:click</span>=<span class="string">"show($event)"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建Vue的实例 (当我们导入包后, 在浏览器的内存中就多了一个Vue构造函数) (VM)</span></span><br><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    <span class="comment">// 表示当前实例要控制的DOM元素</span></span><br><span class="line">    el: <span class="string">"#app"</span>, </span><br><span class="line">    <span class="comment">// data属性中存放的是 el 中需要用到的数据 (M)</span></span><br><span class="line">     <span class="comment">// vm 实例中使用内部的数据或方法 通过 this.属性名(方法名) 来使用</span></span><br><span class="line">    data: &#123;</span><br><span class="line">        msg: <span class="string">"hello word"</span>,</span><br><span class="line">        htmlTest: <span class="string">"&lt;i&gt;把数据当作html来渲染&lt;/i&gt;"</span>,</span><br><span class="line">        mytitle: <span class="string">"v-bind绑定属性"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// methods属性中设置 el 中可用的方法</span></span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="comment">// $evnet 代表事件对象</span></span><br><span class="line">        show(event) &#123;</span><br><span class="line">            <span class="comment">// $event.target 代表触发事件的 DOM 元素</span></span><br><span class="line">            <span class="built_in">console</span>.log(event.target)</span><br><span class="line">        &#125;             </span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a>事件修饰符</h2><ol>
<li><p><code>.capture</code>                         使事件在 捕获阶段触发</p>
</li>
<li><p><code>.stop</code>                               停止事件冒泡</p>
</li>
<li><p><code>.prevent</code>                         阻止事件的默认行为</p>
</li>
<li><p><code>.once</code>                               表示该事件只触发一次</p>
</li>
<li><p><code>.self</code>                               只有绑定的元素才触发该事件</p>
</li>
<li><p><code>.native</code>                           将组件还原为原生DOM执行原生的事件</p>
<blockquote>
<p>给Vue组件绑定事件 需要加<code>.native</code>才能生效</p>
<p>因为Vue的组件默认执行自定义事件</p>
</blockquote>
</li>
</ol>
<h2 id="双向数据绑定"><a href="#双向数据绑定" class="headerlink" title="双向数据绑定"></a>双向数据绑定</h2><p>使用<code>v-model</code>可以实现表单数据双向绑定, 实现表单数据自动搜集</p>
<ul>
<li>v-model 收集的值</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 阻止默认行为, 手动提交表单 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/xxx"</span> @<span class="attr">submit.prevent</span>=<span class="string">"handleSubmit()"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- v-model 绑定 value 属性的值 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>用户名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"userName"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span>密码:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">v-model</span>=<span class="string">"pwd"</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    性别:</span><br><span class="line">        <span class="comment">&lt;!-- v-model 绑定 name 属性 值为 value 的值 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">value</span>=<span class="string">"boy"</span> <span class="attr">v-model</span>=<span class="string">"sex"</span>&gt;</span>男<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">value</span>=<span class="string">"girl"</span> <span class="attr">v-model</span>=<span class="string">"sex"</span>&gt;</span>女<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    爱好:</span><br><span class="line">        <span class="comment">&lt;!-- v-model 绑定选中项目, 绑定它的 value 值 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"zuqiu"</span> <span class="attr">v-model</span>=<span class="string">"likes"</span>&gt;</span>足球<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"lanqiu"</span> <span class="attr">v-model</span>=<span class="string">"likes"</span>&gt;</span>篮球<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"pingpang"</span> <span class="attr">v-model</span>=<span class="string">"likes"</span>&gt;</span>乒乓球<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">value</span>=<span class="string">"yumaoqiu"</span> <span class="attr">v-model</span>=<span class="string">"likes"</span>&gt;</span>羽毛球<span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">        城市:</span><br><span class="line">        <span class="comment">&lt;!-- 下拉框 v-model 绑定给 select, 值为选中 option 的value --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">select</span> <span class="attr">v-model</span>=<span class="string">"city"</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!-- 为动态生成的 option 绑定 key 和 value --&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">option</span> <span class="attr">v-for</span>=<span class="string">"(item, index) in allCity"</span> <span class="attr">:key</span>=<span class="string">"index"</span> <span class="attr">:value</span>=<span class="string">"item.id"</span>&gt;</span> &#123; &#123; item.name &#125; &#125; <span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">label</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- textarea 的 v-model 绑定它的 value 值 --&gt;</span></span><br><span class="line">        签名:<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span>=<span class="string">10</span> <span class="attr">v-model</span>=<span class="string">"inf"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>可以在<code>data</code>里设置绑定数据的默认值</p>
</blockquote>
<h2 id="v-for-循环"><a href="#v-for-循环" class="headerlink" title="v-for 循环"></a>v-for 循环</h2><p>在 2.2.0+ 的版本里, 当在组件里使用<code>v-for</code>时, <strong><code>key</code>是必须的</strong></p>
<p>以便Vue能跟踪每个节点的身份从而重用和重新排序现有元素</p>
<p>使用<code>v-bind</code>绑定<code>key</code>属性的值(它的值只能使用数字或者字符串)</p>
<ul>
<li><p>注意:</p>
<p>Vue只是监视了<code>data</code>上数据自身的变化<strong>没有监视其内部的变化</strong></p>
<p>Vue重写了数组中一系列改变数组内部数据的方法 (先调用原生方法更新数据, 再更新页面)</p>
</li>
<li><p>例如: </p>
<p>使用下标更改数组内部数据, 没有调用数组的变异方法界面就不会更新 (使用<code>splice</code>进行增删改)</p>
</li>
<li><p>优先级:</p>
<p> <code>v-for</code>和<code>v-if</code>同时存在时<code>v-for</code><strong>优先渲染</strong></p>
<p>如果想要先判断需要在外层用<code>template</code>标签包裹</p>
<p><code>template</code>不会渲染到页面中</p>
</li>
<li><p>常用循环</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- v-for 遍历数组 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"item in list"</span>&gt;</span> &#123; &#123; item &#125; &#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"(item, i) in list"</span> <span class="attr">:key</span>=<span class="string">"i"</span>&gt;</span> &#123; &#123; item &#125; &#125; === &#123; &#123; i &#125; &#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- v-for 遍历对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"(value, key, i) in obj"</span> <span class="attr">:key</span>=<span class="string">"i"</span>&gt;</span> &#123; &#123; value &#125; &#125; --- &#123; &#123; key &#125; &#125; --- &#123; &#123; i &#125; &#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- v-for 迭代数字 (从1开始) --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"count in 10"</span>&gt;</span> &#123; &#123; count &#125; &#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="v-if和v-show"><a href="#v-if和v-show" class="headerlink" title="v-if和v-show"></a>v-if和v-show</h2><ul>
<li><p>v-if: 每次重新删除或创建元素, 有较高的元素切换消耗</p>
<blockquote>
<p>适合根据实际情况 生成/删除的元素</p>
</blockquote>
</li>
<li><p>v-show: 只是控制元素的 display 样式，有较高的初始渲染消耗</p>
<blockquote>
<p>适合经常切换显示状态的元素</p>
</blockquote>
</li>
</ul>
<h2 id="Vue设置style"><a href="#Vue设置style" class="headerlink" title="Vue设置style"></a>Vue设置style</h2><p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">:style</span>=<span class="string">"&#123;color: 'red', 'font-width': 800&#125;"</span>&gt;</span> &#123; &#123; msg &#125; &#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">:style</span>=<span class="string">"styleObj"</span>&gt;</span> &#123; &#123; msg &#125; &#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">:style</span>=<span class="string">"[styleObj, styleObj2]"</span>&gt;</span> &#123; &#123; msg &#125; &#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>script</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#app"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        msg: <span class="string">"内联style"</span>,</span><br><span class="line">        styleObj: &#123;</span><br><span class="line">            color: <span class="string">'blue'</span>,</span><br><span class="line">            <span class="string">'font-size'</span>: <span class="string">'20px'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        styleObj2: &#123;</span><br><span class="line">            <span class="string">'background-color'</span>: <span class="string">"green"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h2 id="Vue设置class"><a href="#Vue设置class" class="headerlink" title="Vue设置class"></a>Vue设置class</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 通过 v-bind 绑定 class 属性, 传入一个包含多个字符串类名的数组 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 可以在 数组中使用三元表达式 使class更加智能 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">:class</span>=<span class="string">"['red', 'b', flag? 'big' : '']"</span> <span class="attr">v-text</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 可以将 数组中类名改为对象 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">:class</span>=<span class="string">"['red', &#123;big : true&#125;]"</span> <span class="attr">v-text</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 直接传入 对象 来配置class类 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">:class</span>=<span class="string">"&#123;b: true, big: true&#125;"</span> <span class="attr">v-text</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">:class</span>=<span class="string">"classObj"</span> <span class="attr">v-text</span>=<span class="string">"msg"</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h2 id="自定义过滤器"><a href="#自定义过滤器" class="headerlink" title="自定义过滤器"></a>自定义过滤器</h2><p>Vue中的过滤器可被用作常见的文本格式化, 用于插值表达式和<code>v-bind</code>表达式</p>
<p>过滤器应该被添加在 JavaScript 表达式的尾部由<code>|</code>符号提示</p>
<ul>
<li><p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> &#123; &#123; msg &#125; &#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span> &#123; &#123; msg | msgFilter("实参") | test &#125; &#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"title"</span> <span class="attr">:title</span>=<span class="string">"msg | msgFilter('替换内容')"</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>全局过滤器 (必须写在前面, 第一个参数<code>data</code>默认为<code>|</code>前的数据)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Vue.filter(<span class="string">"msgFilter"</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data, option</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> data.replace(<span class="regexp">/test/g</span>, option)</span><br><span class="line">&#125;)</span><br><span class="line">Vue.filter(<span class="string">"test"</span>, msg =&gt;<span class="string">"==="</span> + msg + <span class="string">"==="</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>过滤器可以多次过滤 (从左往右)</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">	el: <span class="string">"#app"</span>,</span><br><span class="line">	data: &#123;</span><br><span class="line">		msg: <span class="string">"test 我是要 test 过滤 的 内容 test"</span>,</span><br><span class="line">	&#125;,</span><br><span class="line">	filters: &#123;</span><br><span class="line">		<span class="comment">//实例定义私有过滤器 (重名优先使用私有)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h2><ul>
<li><p>参数</p>
<ol>
<li>指令名称 (定义的时候不需要在前面加<code>v-</code>, 使用的时候需要加<code>v-</code>)</li>
<li>一个对象, 这个对象上有一些指令相关的函数, 这些函数可以在特定阶段触发,执行相关操作</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">Vue.directive(<span class="string">"focus"</span>, &#123;</span><br><span class="line">    <span class="comment">// bind 参数: </span></span><br><span class="line">    <span class="comment">//  el: 表示被绑定指令的那个 DOM 元素</span></span><br><span class="line">    <span class="comment">//  bingding &#123;</span></span><br><span class="line">		<span class="comment">// name: 指令名称 == "focus"</span></span><br><span class="line">		<span class="comment">// value: 绑定值表达式 == 2  (1 + 1)</span></span><br><span class="line">        <span class="comment">// expression: 绑定值的字符串形式 == "1 + 1"</span></span><br><span class="line">        <span class="comment">// arg: 传给指令的参数 (例如 v-mytest : foo, arg的值就是foo)</span></span><br><span class="line">        <span class="comment">// oldValue: 指令绑定的前一个值 (仅在 update 和 componentUpdated 钩子中可用)</span></span><br><span class="line">        <span class="comment">// modifiers: 包含一个修饰符的对象</span></span><br><span class="line">    <span class="comment">//  &#125;</span></span><br><span class="line">    <span class="comment">//  vnode: Vue编译生成的虚拟节点</span></span><br><span class="line">    <span class="comment">//  oldVnode: 上一个虚拟节点</span></span><br><span class="line">    <span class="comment">//  钩子函数:</span></span><br><span class="line">    bind(el, binding, vnode, oldVnode) &#123;</span><br><span class="line">        <span class="comment">// 当指令绑定到元素上的时候, 触发执行 (只能触发一次)</span></span><br><span class="line">        el.style.color = binding.value</span><br><span class="line">    &#125;,</span><br><span class="line">    inserted(el) &#123;</span><br><span class="line">        <span class="comment">// 元素插入到 DOM 中的时候, 触发执行</span></span><br><span class="line">        el.focus()</span><br><span class="line">    &#125;,</span><br><span class="line">    updated() &#123;</span><br><span class="line">        <span class="comment">// 当 VNode 更新的时候, 触发执行 (可能触发多次)</span></span><br><span class="line">    &#125;,</span><br><span class="line">    componentUpdated() &#123;</span><br><span class="line">        <span class="comment">// 所在组件的 VNode 及其孩子的 VNode 全部更新时调用</span></span><br><span class="line">    &#125;,</span><br><span class="line">    unbind() &#123;</span><br><span class="line">        <span class="comment">// 元素解绑时触发调用 (只触发一次)</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>如果只想在<code>bind</code>和<code>update</code>钩子上做重复动作, 可以简写</p>
<p><code>el</code>是被绑定的<code>dom元素</code> <code>bingding</code>是配置对象</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.directive(<span class="string">"color-swatch"</span>, (el, binding) =&gt; &#123;</span><br><span class="line">	el.style.backgroundColor = binding.value</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>实例私有</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">	el: <span class="string">"#app"</span>,</span><br><span class="line">	directives: &#123;</span><br><span class="line">		<span class="comment">// 自定义私有指令</span></span><br><span class="line">		<span class="comment">// 简写相当于把该函数同时写到了 bind 和 update 中去</span></span><br><span class="line">        fontsize: <span class="function">(<span class="params">el, binding</span>) =&gt;</span> &#123;</span><br><span class="line">        	el.style.fontSize = <span class="built_in">parseInt</span>(binding.value) + <span class="string">"px"</span></span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="Vue生命周期"><a href="#Vue生命周期" class="headerlink" title="Vue生命周期"></a>Vue生命周期</h2><p>生命周期: 从Vue实例创建、运行、到销毁期间, 总是伴随着各种各样的事件, 这些事件统称为生命周期</p>
<blockquote>
<p>生命周期钩子 = 生命周期函数 = 生命周期事件</p>
</blockquote>
<ul>
<li><p>生命周期三大阶段:</p>
<ol>
<li>创建期间的生命周期函数(创建, 初始化阶段)</li>
<li>运行期间的生命周期函数(运行, 更新阶段)</li>
<li>销毁期间的生命周期函数(死亡, 销毁阶段)</li>
</ol>
</li>
<li><p>生命周期流程</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    <span class="comment">// 第一个生命周期函数, 表示实例完全被创建出来之前, 会执行它</span></span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">		<span class="comment">// 注意: 这时候 data 和 methods 里的数据 都还没有初始化</span></span><br><span class="line">    &#125;,</span><br><span class="line">    data: &#123;</span><br><span class="line">        <span class="comment">// 初始化数据</span></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="comment">// 初始化方法</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 在第二个生命周期函数时, data 和 methods 里的数据才初始化完成</span></span><br><span class="line">    created() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 编译模版, 把Vue代码中的指令执行, 在内存中生成编译好的最终模版字符串</span></span><br><span class="line">    <span class="comment">// 然后把该模版字符串渲染为内存中的 DOM ,此时 DOM 已经渲染 但还在内存中 并未挂载到页面</span></span><br><span class="line">    el: <span class="string">"#app"</span>,</span><br><span class="line">	<span class="comment">// 第三个生命周期函数. 此时模版已经在内存中编译完成了, 但尚未把模版渲染到页面中</span></span><br><span class="line">    beforeMount() &#123;</span><br><span class="line">    </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 将内存中编译好的模版替换到页面中去</span></span><br><span class="line">    <span class="comment">// 第四个生命周期函数, 此时 DOM 挂载完成, 它是实例创建生命周期的最后一个函数</span></span><br><span class="line">    mounted() &#123;</span><br><span class="line">	<span class="comment">// 该函数执行完毕 则表示 整个Vue实例已经创建完毕, 并已渲染到页面</span></span><br><span class="line">    <span class="comment">// 此时已经脱离创建阶段, 进入运行阶段</span></span><br><span class="line">    <span class="comment">// 如果要操作页面中的 DOM 元素最早只能在这里进行</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 运行阶段, data 里的数据改变时候触发以下两个函数 (最少触发0次, 最多触发无限次)</span></span><br><span class="line">    <span class="comment">// 表示 data 数据已经改变, 但是还未渲染到页面中去</span></span><br><span class="line">    beforeUpdate() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 根据 data 中最新的数据, 在内存中重新渲染出一份新的 DOM 树, 然后 将其渲染到页面中去</span></span><br><span class="line">    updated() &#123;</span><br><span class="line">        <span class="comment">// 此时 页面中的数据 已经更新 和 data 中的最新数据相同</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// vm.$destroy() 实例调用 $destory() 方法时, 进入销毁阶段</span></span><br><span class="line">    <span class="comment">// 当执行该函数时, Vue 实例就已经从运行阶段 进入销毁阶段</span></span><br><span class="line">    beforeDestroy() &#123;</span><br><span class="line">        <span class="comment">// 此时实例上的所有数据、方法、过滤器、指令依然可用</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// Vue 实例已销毁, 此时组件上的所有数据、方法、过滤器、指令都不再可用</span></span><br><span class="line">    destroyed() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="过渡动画"><a href="#过渡动画" class="headerlink" title="过渡动画"></a>过渡动画</h2><ol>
<li><p>使用 Vue 定义的<code>transition元素</code> 将动画元素包裹起来</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-if</span>=<span class="string">"flag1"</span>&gt;</span>动画效果<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">name</span>=<span class="string">"my"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h3</span> <span class="attr">v-if</span>=<span class="string">"flag2"</span>&gt;</span>自定义V前缀<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义两组样式, 来控制 transition 内部元素实现的动画</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* 初始和结束状态的样式 */</span></span><br><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span>&#123;</span><br><span class="line">	<span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 进入/离开 动画效果设置 */</span></span><br><span class="line"><span class="selector-class">.v-enter-active</span>,</span><br><span class="line"><span class="selector-class">.v-leave-active</span>&#123;</span><br><span class="line">	<span class="attribute">transition</span>: all <span class="number">0.4s</span> ease;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>自定义动画效果 transition 的 name 属性控制前缀</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.my-enter</span>,</span><br><span class="line"><span class="selector-class">.my-leave-to</span>&#123;</span><br><span class="line">	<span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">	<span class="attribute">transform</span>: <span class="built_in">translateX</span>(100px)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.my-enter-active</span>,</span><br><span class="line"><span class="selector-class">.my-leave-active</span>&#123;</span><br><span class="line">	<span class="attribute">transition</span>: all <span class="number">0.4s</span> ease;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>展开收起效果</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;!<span class="selector-tag">--</span> 设置初始和结束高度 <span class="selector-tag">--</span>&gt;</span><br><span class="line"><span class="selector-class">.div-enter</span>,</span><br><span class="line"><span class="selector-class">.div-leave-to</span> &#123;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line">&lt;!<span class="selector-tag">--</span> 设置展开后高度 <span class="selector-tag">--</span>&gt;</span><br><span class="line"><span class="selector-class">.div-enter-to</span>,</span><br><span class="line"><span class="selector-class">.div-leave</span> &#123;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">2000px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line">&lt;!<span class="selector-tag">--</span> 动画效果 <span class="selector-tag">--</span>&gt;</span><br><span class="line"><span class="selector-class">.div-enter-active</span>,</span><br><span class="line"><span class="selector-class">.div-leave-active</span>&#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.4s</span> linear;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>动画流程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">      ENTER                    LEAVE</span><br><span class="line">v-enter | v-enter-to --- v-leave | v-leave-to</span><br><span class="line">  v-enter-active           v-leave-active</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h2 id="钩子函数动画"><a href="#钩子函数动画" class="headerlink" title="钩子函数动画"></a>钩子函数动画</h2><ul>
<li><p>入场钩子函数事件绑定</p>
<ol>
<li><p>动画元素初始状态， 此时动画还未执行</p>
<blockquote>
<p><code>v-on: before-enter = &quot;beforeEnter&quot;</code></p>
</blockquote>
</li>
<li><p>动画执行后元素的状态</p>
<blockquote>
<p><code>v-on: enter = &quot;enter&quot;</code></p>
</blockquote>
<blockquote>
<p><code>v-on: after-enter = &quot;afterEnter&quot;</code></p>
</blockquote>
<blockquote>
<p><code>v-on: enter-cancelled = &quot;enterCancelled&quot;</code></p>
</blockquote>
</li>
<li><p>出场钩子函数事件绑定</p>
<blockquote>
<p><code>v-on: before-leave = &quot;beforeLeave&quot;</code></p>
</blockquote>
<blockquote>
<p><code>v-on: leave = &quot;leave&quot;</code></p>
</blockquote>
<blockquote>
<p><code>v-on: after-leave = &quot;afterLeave&quot;</code></p>
</blockquote>
<blockquote>
<p><code>v-on: leave-cancelled = &quot;leaveCancelled&quot;</code></p>
</blockquote>
</li>
</ol>
</li>
<li><p>html模板</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition </span><br><span class="line">	@before-enter=<span class="string">"beforeEnter"</span></span><br><span class="line">	@enter=<span class="string">"enter"</span></span><br><span class="line">	@after-enter=<span class="string">"afterEnter"</span></span><br><span class="line">&gt;</span><br><span class="line">	&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"ball"</span> v-show=<span class="string">"flag"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> </span><br><span class="line">&lt;<span class="regexp">/transition&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>实例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">"#app"</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        flag: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 动画钩子函数的第一个参数 表示要执行动画的那个 DOM 元素</span></span><br><span class="line">    methods: &#123;</span><br><span class="line">        beforeEnter(el) &#123;</span><br><span class="line">            el.style.transform = <span class="string">"translate(0, 0)"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        enter(el, done) &#123;</span><br><span class="line">            <span class="comment">// 没有实际作用, 如果不写 动画效果显示不出来</span></span><br><span class="line">            <span class="comment">// 可以认为 el.offsetTop 会强制动画刷新</span></span><br><span class="line">            el.offsetTop</span><br><span class="line">            el.style.transform = <span class="string">"translate(150px, 450px)"</span></span><br><span class="line">            el.style.transition = <span class="string">"all 1s ease"</span></span><br><span class="line">            <span class="comment">// done 就是 afterEnter 函数的引用, 表示动画完成立即执行 动画结束的函数</span></span><br><span class="line">            <span class="comment">// 使用 js 钩子函数动画 done 是必须的</span></span><br><span class="line">            done()</span><br><span class="line">        &#125;,</span><br><span class="line">        afterEnter(el) &#123;</span><br><span class="line">            <span class="keyword">this</span>.flag = !<span class="keyword">this</span>.flag</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="列表动画效果"><a href="#列表动画效果" class="headerlink" title="列表动画效果"></a>列表动画效果</h2><ul>
<li><p>html</p>
<ol>
<li>如果是<code>v-for</code>渲染出来的多个元素, 实现动画需要用<code>transition-group</code>包裹 </li>
<li>如果要为<code>v-for</code>循环创建的元素设置动画, 必须为每一个元素绑定<code>key</code>属性</li>
<li><code>appear</code>实现页面载入入场效果</li>
<li><code>tag</code>指定<code>transition</code>渲染成的HTML元素, 如果不指定默认渲染为<code>span</code>元素</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition-group</span> <span class="attr">appear</span> <span class="attr">tag</span>=<span class="string">"div"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">v-for</span>=<span class="string">"(item, i) in list"</span> <span class="attr">:key</span>=<span class="string">"item.id"</span> @<span class="attr">click</span>=<span class="string">"del(i)"</span>&gt;</span> &#123; &#123; item.id &#125; &#125; ++ &#123; &#123; item.name &#125; &#125; <span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition-group</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>css</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(80px)</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-enter-active</span>,</span><br><span class="line"><span class="selector-class">.v-leave-active</span>&#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.6s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* .v-move 和 .v-leave-active 可以实现列表元素后续移动的动画效果 */</span></span><br><span class="line"><span class="selector-class">.v-move</span>&#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.6s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-leave-active</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="组件化"><a href="#组件化" class="headerlink" title="组件化"></a>组件化</h2><ul>
<li><p>什么是组件:</p>
<ol>
<li><p>组件是为了拆分 Vue 实例的代码量, 能够让我们以不同组件来划分不同的功能模块</p>
</li>
<li><p>将来我们需要什么样的功能就可以去调用对应的组件即可</p>
<ul>
<li><p>模块化: 从代码逻辑的角度进行划分</p>
<blockquote>
<p>方便代码分层开发, 保证每一个功能模块的职能单一</p>
</blockquote>
</li>
<li><p>组件化: 从UI界面的角度进行划分</p>
<blockquote>
<p>前端的组件化, 方便UI组件的复用</p>
</blockquote>
</li>
</ul>
</li>
</ol>
</li>
<li><p>使用组件</p>
<ol>
<li>要使用组件直接把组件的名称 以 HTML 标签的形式引入页面</li>
<li>如果使用驼峰命名法则需要在引用的时候把字母改为小写单词间用<code>-</code>连接</li>
</ol>
</li>
<li><p>使用<code>Vue.component(&quot;组件的名称&quot;, 创建出来的组件模版对象)</code></p>
<ol>
<li><p>全局组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">"myComponent"</span>,  Vue.extend(&#123;</span><br><span class="line">	<span class="comment">// 使用 Vue.extend 来创建全局的 Vue 组件</span></span><br><span class="line">	<span class="comment">// 通过 template 属性来指定组件展示的HTML结构</span></span><br><span class="line">	template: <span class="string">"&lt;h1&gt;这是使用 Vue.extend 创建的组件&lt;/h1&gt;"</span></span><br><span class="line">&#125;))</span><br></pre></td></tr></table></figure>
</li>
<li><p>全局简写</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 简写1</span></span><br><span class="line">Vue.component(<span class="string">"mycom"</span>, &#123;</span><br><span class="line">    template: <span class="string">"&lt;h1&gt;简写形式 + &#123; &#123; msg &#125; &#125; &lt;/h1&gt;"</span>,</span><br><span class="line">    <span class="comment">// 组件自己的 data 是一个函数 必须返回一个对象</span></span><br><span class="line">    data() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            msg: <span class="string">"这是组件的msg"</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 简写2</span></span><br><span class="line">Vue.component(<span class="string">"mycom2"</span>, &#123;</span><br><span class="line">    <span class="comment">// 模板写在html里, 使用 template包裹 id标识</span></span><br><span class="line">    <span class="comment">// &lt;template id="tmp"&gt; 模板 &lt;/template&gt;</span></span><br><span class="line">	template: <span class="string">"#tmp"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>私有组件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        <span class="comment">//自定义私有数据</span></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        <span class="comment">//自定义私有方法</span></span><br><span class="line">    &#125;,</span><br><span class="line">    filters: &#123;</span><br><span class="line">        <span class="comment">//自定义私有过滤器</span></span><br><span class="line">    &#125;,</span><br><span class="line">    directives: &#123;</span><br><span class="line">        <span class="comment">//自定义私有指令</span></span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        <span class="comment">//自定义私有组件</span></span><br><span class="line">        myCom: &#123;</span><br><span class="line">            template: <span class="string">"&lt;h1&gt;私有组件&lt;/h1&gt;"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//生命周期钩子函数</span></span><br><span class="line">    beforeCreate() &#123;</span><br><span class="line">        <span class="comment">//Vue实例创建之前</span></span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">        <span class="comment">//数据初始化完成</span></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeMount() &#123;</span><br><span class="line">        <span class="comment">//模版渲染前, 已编译完成</span></span><br><span class="line">    &#125;,</span><br><span class="line">    mounted() &#123;</span><br><span class="line">        <span class="comment">//模版渲染完成, Vue实例创建完毕</span></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeUpdate() &#123;</span><br><span class="line">        <span class="comment">// data 数据更新, 页面未同步</span></span><br><span class="line">    &#125;,</span><br><span class="line">    updated() &#123;</span><br><span class="line">        <span class="comment">// 页面同步 data 数据</span></span><br><span class="line">    &#125;,</span><br><span class="line">    beforeDestroy() &#123;</span><br><span class="line">        <span class="comment">// Vue实例销毁之前, 数据还可用</span></span><br><span class="line">    &#125;,</span><br><span class="line">    destroyed() &#123;</span><br><span class="line">        <span class="comment">// Vue实例完全销毁, 不可用</span></span><br><span class="line">    &#125;,</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h2 id="组件切换"><a href="#组件切换" class="headerlink" title="组件切换"></a>组件切换</h2><ul>
<li><p>Vue提供了<code>component</code>来展示对应名称的组件</p>
<blockquote>
<p><code>component</code>是一个占位符<code>is</code>属性可以用来指定要展示的组件名称</p>
</blockquote>
</li>
<li><p>切换动画效果: 通过<code>mode</code>属性来设置组件切换模式</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">transition</span> <span class="attr">mode</span>=<span class="string">"out-in"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">component</span> <span class="attr">:is</span>=<span class="string">"flag"</span>&gt;</span><span class="tag">&lt;/<span class="name">component</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">transition</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.v-enter</span>,</span><br><span class="line"><span class="selector-class">.v-leave-to</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(100px)</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.v-enter-active</span>,</span><br><span class="line"><span class="selector-class">.v-leave-active</span>&#123;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="props"><a href="#props" class="headerlink" title="props"></a>props</h2><p><code>props</code>  主要用于父组件向子组件传递数据</p>
<p>父组件可以在引用子组件的时候, 通过属性绑定<code>:</code>的形式将数据传入子组件</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">myCom</span> <span class="attr">:parent</span>=<span class="string">"msg"</span> @<span class="attr">fun</span>=<span class="string">"show"</span>&gt;</span>子组件<span class="tag">&lt;/<span class="name">myCom</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li><p>实例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">    el: <span class="string">'#app'</span>,</span><br><span class="line">    data: &#123;</span><br><span class="line">        msg: <span class="string">"父组件的私有数据"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">        show(arg) &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"父组件方法调用! data:"</span> + arg)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    components: &#123;</span><br><span class="line">        myCom: &#123;</span><br><span class="line">            <span class="comment">//  子组件里的私有数据</span></span><br><span class="line">            data() &#123;</span><br><span class="line">                <span class="comment">// 子组件 data 需要 return 一个对象</span></span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    msg: <span class="string">"子组件私有数据"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            template: <span class="string">"#tem"</span>,</span><br><span class="line">            <span class="comment">// 使用父组件传入的数据 需要在 props 数组里定义该属性才能使用</span></span><br><span class="line">            <span class="comment">// props 里的数据是父组件传入的 , 只读</span></span><br><span class="line">            props: [<span class="string">"parent"</span>],</span><br><span class="line">            methods: &#123;</span><br><span class="line">                <span class="comment">//  子组件私有方法</span></span><br><span class="line">                childFun() &#123;</span><br><span class="line">                    <span class="comment">//  使用 this.$emit() 方法来调用 父组件传入的方法 , 实参从第二个位置开始</span></span><br><span class="line">                    <span class="keyword">this</span>.$emit(<span class="string">"fun"</span>, <span class="string">"arg"</span>)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="自定义事件"><a href="#自定义事件" class="headerlink" title="自定义事件"></a>自定义事件</h2><ul>
<li><p>自定义事件: 主要用于子组件向父组件传递数据</p>
</li>
<li><p>每个<code>Vue实例</code>都实现了事件接口<code>Events interface</code></p>
<ol>
<li>使用<code>vm.$on(eventName)</code>监听当前实例上的自定义事件</li>
<li>使用<code>vm.$emit(eventName)</code>触发事件</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vm.$on(<span class="string">'test'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(msg)</span><br><span class="line">&#125;)</span><br><span class="line">vm.$emit(<span class="string">'test'</span>, <span class="string">'hi'</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>命名约定: 因为<code>html</code>忽略大小写所以使用<code>-</code>命名法</p>
</li>
<li><p>数据传递: 子组件通过$emit可以触发事件</p>
<ol>
<li>第一个参数为要触发的事件名称</li>
<li>第二个事件为要传递的数据</li>
</ol>
</li>
<li><p>流程</p>
<ol>
<li><p>子组触发事件调用事件函数</p>
</li>
<li><p>在事件函数中使用<code>this.$emit (事件名, 参数)</code>触发自定义事件</p>
</li>
<li><p>在父组件上设置监听子组件是否触发自定义事件 触发则调用响应函数</p>
<blockquote>
<p><code>&lt;child @emitName=&quot;callBack()&quot;&gt;&lt;/child&gt;</code></p>
</blockquote>
</li>
</ol>
</li>
</ul>
<h2 id="ref获取DOM元素"><a href="#ref获取DOM元素" class="headerlink" title="ref获取DOM元素"></a>ref获取DOM元素</h2><ul>
<li><p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">test</span> <span class="attr">ref</span>=<span class="string">"myCOM"</span>&gt;</span><span class="tag">&lt;/<span class="name">test</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>相关属性</p>
<ol>
<li><code>this.$refs.myCom</code>                                  既是我们获取到的DOM元素</li>
<li><code>this.$refs.myCOM.$el.innerHTML</code>     模板的<code>innerHTML</code>需要<code>.$el</code></li>
<li><code>this.$refs.myCOM.xxx</code>                          模板的数据/方法可以直接使用</li>
</ol>
</li>
</ul>
<h2 id="计算属性"><a href="#计算属性" class="headerlink" title="计算属性"></a>计算属性</h2><p>在<code>computed</code>中可以定义一些属性, 这些属性叫做计算属性</p>
<ol>
<li>计算属性的本质就是一个方法, 我们在使用这些计算属性的时候把它们的名称直接当做属性来使用</li>
<li>计算属性使用的时候<strong>不要加</strong><code>()</code>, 只要计算属性内部的数据发生了变化 计算属性就会立即重新计算</li>
<li>计算属性的求值结果会被缓存起来, 之后可直接使用, 只有数据变化时才会调用该函数重新计算</li>
</ol>
<ul>
<li><p>将计算属性配置为一个对象, 使其可以双向计算</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fullName: &#123;</span><br><span class="line">	<span class="comment">// get方法 在获取属性值的时候回调</span></span><br><span class="line">	get() &#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="keyword">this</span>.lastName</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="comment">// set方法 在属性值发生改变的时候回调, 更新相关的属性数据</span></span><br><span class="line">	set(value) &#123;</span><br><span class="line">		<span class="comment">// value 就是 fullName 修改后的值</span></span><br><span class="line">		<span class="keyword">const</span> arr = value.split(<span class="string">" "</span>)</span><br><span class="line">		<span class="keyword">this</span>.firstName = arr[<span class="number">0</span>]</span><br><span class="line">		<span class="keyword">this</span>.lastName = arr[<span class="number">1</span>]</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="watch监视"><a href="#watch监视" class="headerlink" title="watch监视"></a>watch监视</h2><p><code>watch</code>这个属性可以监视<code>data</code>中的数据变化 , 当数据变化时触发相应回调函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    <span class="comment">// 监视属性名 如果有 - 则需要用 "" 包裹</span></span><br><span class="line">    <span class="comment">// watch 回调函数不能使用箭头函数</span></span><br><span class="line">    watchName: <span class="function"><span class="keyword">function</span> (<span class="params">newVal, oldVal</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log (newVal, oldVal)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 它主要用来监视 路由地址 的变化</span></span><br><span class="line">    <span class="string">"$route.path"</span>: <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// $route对象里保存有当前路由对象的信息</span></span><br><span class="line">        <span class="built_in">console</span>.console.log(<span class="keyword">this</span>.$route)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p><code>deep: true</code>  深度监视对象内部数据变化 (数组不需要深度监视)</p>
<p> 为数据绑定的对象 添加新属性 需要使用<code>Vue.set(object, key, value)</code></p>
<p>通过<code>watch + this.$nextTick(callback)</code>确保在异步完成, DOM更新后执行回调函数</p>
</blockquote>
<h2 id="solt插槽"><a href="#solt插槽" class="headerlink" title="solt插槽"></a>solt插槽</h2><ul>
<li><p>作用</p>
<ol>
<li>主要用于复用较多的组件, <code>slot</code>占位的位置有对应插入则显示没有则忽略</li>
<li>传递的是制作好的标签, <code>props</code>和<code>自定义事件</code>传递数据</li>
</ol>
</li>
<li><p>使用流程</p>
<ol>
<li><p>子组件写<code>slot</code>标签占位, 用<code>name</code>属性标识</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"text1"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">slot</span> <span class="attr">name</span>=<span class="string">"text2"</span>&gt;</span><span class="tag">&lt;/<span class="name">slot</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>父组件中写好替换标签插入子组件中替换对应内容</p>
<blockquote>
<p>子组件不能用自结束标签</p>
<p>替换标签的<code>slot</code>属性与<code>name</code>对应</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">child</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"text1"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">span</span> <span class="attr">slot</span>=<span class="string">"text2"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<h2 id="原理分析"><a href="#原理分析" class="headerlink" title="原理分析"></a>原理分析</h2><h3 id="数据代理"><a href="#数据代理" class="headerlink" title="数据代理"></a>数据代理</h3><ul>
<li><p>数据代理:  通过一个对象代理对另一个对象中属性的操作(读/写)</p>
</li>
<li><p>Vue数据代理:  通过<code>vm实例</code>来代理<code>data</code>中所有的属性</p>
<ul>
<li>好处:  方便操作<code>data</code>中的数据</li>
<li>实现:<ol>
<li>通过<code>Object.defineProperty()</code>给<code>vm</code>添加与<code>data</code>的属性对应的属性描述符</li>
<li>所有添加的属性都包含<code>getter/setter</code></li>
<li>在<code>getter/setter</code>内部去操作<code>data</code>中对应的属性数据</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3 id="模块解析"><a href="#模块解析" class="headerlink" title="模块解析"></a>模块解析</h3><ul>
<li><p>模板解析基本流程:</p>
<ol>
<li><p>将<code>el</code>的所有子节点取出, 添加到一个新建的<code>fragment</code>对象中</p>
</li>
<li><p>对<code>fragment</code>中的所有层次的子节点递归进行编译解析处理</p>
<ul>
<li><p>对插值表达式<code>{ {  } }</code>文本节点进行解析</p>
</li>
<li><p>对元素节点的指令属性进行解析</p>
</li>
<li><p>对事件指令解析</p>
</li>
<li><p>一般指令解析</p>
</li>
</ul>
</li>
<li><p>将解析后的 fragment 插入 el 中显示到页面上</p>
</li>
</ol>
</li>
<li><p>插值表达式解析:</p>
<ol>
<li>根据正则对象得到匹配出的表达式字符串</li>
<li>从<code>data</code>中取出表达式对应的属性值</li>
<li>将属性值设置为文本节点的<code>textContent</code></li>
</ol>
</li>
<li><p>事件指令解析:</p>
<ol>
<li>从指令名中取出事件名</li>
<li>根据指令的值(表达式)从<code>methods</code>里取出对应的事件处理函数</li>
<li>给当前元素节点绑定指定事件名和回调函数的<code>dom</code>事件监听 (<code>bind</code>绑定<code>this</code>)</li>
<li>指令解析完毕后移除指令属性</li>
</ol>
</li>
<li><p>一般指令解析:</p>
<ol>
<li>得到指令名和指令值(表达式)</li>
<li>从<code>data</code>中根据表达式得到对应的值</li>
<li>根据指令名确定需要操作元素节点的什么属性<ul>
<li><code>v-text</code> ==&gt; <code>textContent</code></li>
<li><code>v-html</code> ==&gt; <code>innerHTML</code></li>
<li><code>v-class</code> ==&gt; <code>class</code></li>
</ul>
</li>
<li>将得到的表达式的值设置到对应的属性上</li>
<li>移除元素的指令属性</li>
</ol>
</li>
</ul>
<h3 id="数据绑定"><a href="#数据绑定" class="headerlink" title="数据绑定"></a>数据绑定</h3><ul>
<li><p>数据绑定:</p>
<p>一旦更新了<code>data</code>中的某个属性数据, 界面上跟该属性相关的节点都会跟着更新</p>
</li>
<li><p>数据劫持:</p>
<ol>
<li>数据劫持是 Vue 中用来实现数据绑定的一种技术</li>
<li>基本思路: <ul>
<li>通过<code>defineProperty()</code>来监视<code>data</code>中所有属性(任意层次)数据的变化, 一旦变化就去更新界面</li>
<li>数据代理是在<code>vm实例</code>上添加<code>data</code>中数据的<code>getter</code>和<code>setter</code></li>
<li>数据绑定是在<code>data</code>里给每个数据添加<code>getter</code>和<code>setter</code></li>
</ul>
</li>
</ol>
</li>
<li><p>流程:</p>
<ol>
<li><code>vm.name = &quot;newStr&quot;</code></li>
<li><code>data</code>中的<code>name</code>属性值变化</li>
<li><code>name</code>属性的<code>set()</code>函数调用</li>
<li><code>Dep</code></li>
<li>相关的所有<code>Watcher</code></li>
<li>调用更新界面的回调函数</li>
</ol>
</li>
<li><p><code>Dep</code>与<code>Wathcer</code>之间的关系:</p>
<ul>
<li>多对多</li>
<li><code>name</code>属性 ==&gt; 一个<code>Dep</code>  ==&gt; n个<code>Watcher</code> (<code>name</code>属性在模板中使用了n次)</li>
<li>表达式 ==&gt; 一个<code>Watcher</code> ==&gt; n个<code>Dep</code> (多层表达式n层, 例如: <code>item.info.name</code>)</li>
</ul>
</li>
<li><p>如何建立关系:  在<code>data</code>中的属性的<code>get()</code>中建立</p>
</li>
<li>什么时候建立关系:  初始化解析模块中的表达式创建<code>Watcher</code>对象时建立关系</li>
<li>双向数据绑定:<ol>
<li>建立在单向数据绑定的基础上</li>
<li>双向数据绑定的实现流程:<ul>
<li>在解析<code>v-model</code>指令时, 给当前元素添加<code>input</code>监听</li>
<li>当<code>input</code>的<code>value</code>发生改变时, 将最新的值赋值给当前表达式所对应的<code>data</code>属性</li>
<li><code>data</code>属性改变从而触发 model ==&gt; View 页面更新</li>
</ul>
</li>
</ol>
</li>
</ul>
<h2 id="原理代码注释"><a href="#原理代码注释" class="headerlink" title="原理代码注释"></a>原理代码注释</h2><p>注: <a href="https://github.com/DMQ/mvvm" rel="external nofollow noopener noreferrer" target="_blank"><strong>代码来源与Github</strong></a><br>本人只是根据自己的理解进行注释</p>
<h3 id="mvvm"><a href="#mvvm" class="headerlink" title="mvvm"></a>mvvm</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MVVM</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// MVVM 是一个构造函数, this 指向它 new 出来的实例</span></span><br><span class="line">    <span class="comment">// 配置对象默认值 &#123;&#125; 并将其保存在实例的 $options 属性上</span></span><br><span class="line">    <span class="keyword">this</span>.$options = options || &#123;&#125;;</span><br><span class="line">    <span class="comment">// 保存 data 和 this</span></span><br><span class="line">    <span class="keyword">var</span> data = <span class="keyword">this</span>._data = <span class="keyword">this</span>.$options.data;</span><br><span class="line">    <span class="keyword">var</span> me = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 数据代理</span></span><br><span class="line">    <span class="comment">// 实现 vm.xxx -&gt; vm._data.xxx</span></span><br><span class="line">    <span class="comment">// Object.keys(data)    返回包含data对象上所有可枚举属性名的数组</span></span><br><span class="line">    <span class="comment">//  arr.forEach(callback(value, index, arr))    遍历数组 依次取出 数组中的每个元素 来执行回调函数</span></span><br><span class="line">    <span class="built_in">Object</span>.keys(data).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 对该属性实现 数据代理</span></span><br><span class="line">        me._proxyData(key);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">// 实现计算属性</span></span><br><span class="line">    <span class="keyword">this</span>._initComputed();</span><br><span class="line">    <span class="comment">// 对data中所有层次的属性通过数据劫持实现数据绑定</span></span><br><span class="line">    observe(data, <span class="keyword">this</span>);</span><br><span class="line">    <span class="comment">// new 一个编译对象, 解析模板</span></span><br><span class="line">    <span class="keyword">this</span>.$compile = <span class="keyword">new</span> Compile(options.el || <span class="built_in">document</span>.body, <span class="keyword">this</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">MVVM.prototype = &#123;</span><br><span class="line">    $watch: <span class="function"><span class="keyword">function</span>(<span class="params">key, cb, options</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Watcher(<span class="keyword">this</span>, key, cb);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    _proxyData: <span class="function"><span class="keyword">function</span>(<span class="params">key, setter, getter</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> me = <span class="keyword">this</span>;</span><br><span class="line">        setter = setter || </span><br><span class="line">        <span class="comment">// Object.defineProperty(要操作的对象, 需要操作的属性名, 属性描述符&#123;&#125;)</span></span><br><span class="line">        <span class="comment">// 给vm实例对象添加 data上的属性的描述符</span></span><br><span class="line">        <span class="built_in">Object</span>.defineProperty(me, key, &#123;</span><br><span class="line">            <span class="comment">// 是否可以重新定义</span></span><br><span class="line">            configurable: <span class="literal">false</span>,</span><br><span class="line">            <span class="comment">// 是否可以枚举</span></span><br><span class="line">            enumerable: <span class="literal">true</span>,</span><br><span class="line">            <span class="comment">// 动态计算 该属性的值</span></span><br><span class="line">            get: <span class="function"><span class="keyword">function</span> <span class="title">proxyGetter</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> me._data[key];</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// 该属性被修改时触发的回调函数, 修改值作为实参传入</span></span><br><span class="line">            set: <span class="function"><span class="keyword">function</span> <span class="title">proxySetter</span>(<span class="params">newVal</span>) </span>&#123;</span><br><span class="line">                me._data[key] = newVal;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    _initComputed: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> me = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">var</span> computed = <span class="keyword">this</span>.$options.computed;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> computed === <span class="string">'object'</span>) &#123;</span><br><span class="line">            <span class="built_in">Object</span>.keys(computed).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">                <span class="built_in">Object</span>.defineProperty(me, key, &#123;</span><br><span class="line">                    get: <span class="keyword">typeof</span> computed[key] === <span class="string">'function'</span> </span><br><span class="line">                            ? computed[key] </span><br><span class="line">                            : computed[key].get,</span><br><span class="line">                    set: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="compile"><a href="#compile" class="headerlink" title="compile"></a>compile</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Compile</span>(<span class="params">el, vm</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Compile实例的$vm属性保存 vm实例对象</span></span><br><span class="line">    <span class="keyword">this</span>.$vm = vm;</span><br><span class="line">    <span class="comment">// 对el参数进行判断是元素节点还是css选择器, 将对应的元素节点保存到 Compile实例的 $el 中</span></span><br><span class="line">    <span class="keyword">this</span>.$el = <span class="keyword">this</span>.isElementNode(el) ? el : <span class="built_in">document</span>.querySelector(el);</span><br><span class="line">    <span class="comment">// 如果 $el 属性不为空 执行以下语句</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.$el) &#123;</span><br><span class="line">        <span class="comment">// 将 el 中的所有子节点转移到 $fragment 中</span></span><br><span class="line">        <span class="keyword">this</span>.$fragment = <span class="keyword">this</span>.node2Fragment(<span class="keyword">this</span>.$el);</span><br><span class="line">        <span class="comment">// 调用初始化函数 编译 $fragment 中所有层次的子节点</span></span><br><span class="line">        <span class="keyword">this</span>.init();</span><br><span class="line">        <span class="comment">// 将编译好的模板 插入 el 标签中 使其显示到页面上</span></span><br><span class="line">        <span class="keyword">this</span>.$el.appendChild(<span class="keyword">this</span>.$fragment);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Compile.prototype = &#123;</span><br><span class="line">    node2Fragment: <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 新建一个 fragment 并将其作为最终返回结果</span></span><br><span class="line">        <span class="comment">// DocumentFragment 是Node接口的实现. document element等都是 Node接口的实现(Node节点)</span></span><br><span class="line">            <span class="comment">// documnet: 对应html页面, 包含多个element, 只要其中某一个element更新 页面就会跟着更新</span></span><br><span class="line">            <span class="comment">//  DocumentFragment: 内存中保存多个element的容器对象(不显示在页面上, 内存中的DOM树)</span></span><br><span class="line">        <span class="keyword">var</span> fragment = <span class="built_in">document</span>.createDocumentFragment();</span><br><span class="line">        <span class="keyword">var</span> child;</span><br><span class="line">        <span class="comment">// 将原生el节点所有的子节点依次移动到内存中的DocumentFragment容器中</span></span><br><span class="line">        <span class="comment">// 先赋值再判断, 只要 child 不为空就一直循环执行</span></span><br><span class="line">        <span class="keyword">while</span> (child = el.firstChild) &#123;</span><br><span class="line">            <span class="comment">// 因为一个元素节点只能有一个父节点</span></span><br><span class="line">            <span class="comment">// 将 child 添加到 fragment 节点下时, 会先将该元素从原来的父节点中移除</span></span><br><span class="line">            fragment.appendChild(child);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 返回 内存中的 DocumentFragment容器</span></span><br><span class="line">        <span class="keyword">return</span> fragment;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 对 $fragment 进行编译 </span></span><br><span class="line">        <span class="keyword">this</span>.compileElement(<span class="keyword">this</span>.$fragment);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    compileElement: <span class="function"><span class="keyword">function</span>(<span class="params">el</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 将 $fragment 中的所有子节点保存到一个伪数组childNodes中 </span></span><br><span class="line">        <span class="keyword">var</span> childNodes = el.childNodes;</span><br><span class="line">        <span class="keyword">var</span> me = <span class="keyword">this</span>;</span><br><span class="line">        <span class="comment">// 指定childNodes伪数组去调用数组的slice方法,返回childNodes的真数组, 再调用数组的forEach方法进行遍历</span></span><br><span class="line">        [].slice.call(childNodes).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// text 为遍历 node 的文本内容</span></span><br><span class="line">            <span class="keyword">var</span> text = node.textContent;</span><br><span class="line">            <span class="comment">// reg 为匹配 &#123; &#123;  &#125; &#125; 的正则表达式</span></span><br><span class="line">            <span class="comment">// ()子匹配, 括号内的内容保存 在RegExp.$1~n中</span></span><br><span class="line">            <span class="keyword">var</span> reg = <span class="regexp">/\&#123;\&#123;(.*)\&#125;\&#125;/</span>;</span><br><span class="line">            <span class="comment">// 如果该节点是元素节点</span></span><br><span class="line">            <span class="keyword">if</span> (me.isElementNode(node)) &#123;</span><br><span class="line">                <span class="comment">// 则编译元素节点的指令</span></span><br><span class="line">                me.compile(node);</span><br><span class="line">            <span class="comment">// 如果该节点是文本节点 并且符合正则表达式</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (me.isTextNode(node) &amp;&amp; reg.test(text)) &#123;</span><br><span class="line">                <span class="comment">// 则编译 &#123; &#123;  &#125; &#125; 的文本节点</span></span><br><span class="line">                me.compileText(node, <span class="built_in">RegExp</span>.$<span class="number">1</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 再判断 该节点是否还有子节点并且不为空</span></span><br><span class="line">            <span class="keyword">if</span> (node.childNodes &amp;&amp; node.childNodes.length) &#123;</span><br><span class="line">                <span class="comment">// 则递归调用这个函数 深入编译该节点的子节点</span></span><br><span class="line">                me.compileElement(node);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    compile: <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// Element.attributes 属性返回该元素所有属性节点的伪数组</span></span><br><span class="line">        <span class="keyword">var</span> nodeAttrs = node.attributes;</span><br><span class="line">        <span class="keyword">var</span> me = <span class="keyword">this</span>;</span><br><span class="line">        <span class="comment">// 转换为真数组后 遍历所有的属性节点</span></span><br><span class="line">        [].slice.call(nodeAttrs).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">attr</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 保存属性名(v-on:click)</span></span><br><span class="line">            <span class="keyword">var</span> attrName = attr.name;</span><br><span class="line">            <span class="comment">// 判断该属性是否为指令属性</span></span><br><span class="line">            <span class="keyword">if</span> (me.isDirective(attrName)) &#123;</span><br><span class="line">                <span class="comment">// 获取指令的值 (exp = show)</span></span><br><span class="line">                <span class="keyword">var</span> exp = attr.value;</span><br><span class="line">                <span class="comment">// 从下标2开始 截取指令名称(dir = on:click)</span></span><br><span class="line">                <span class="keyword">var</span> dir = attrName.substring(<span class="number">2</span>);</span><br><span class="line">                <span class="comment">// 判断是否为事件指令</span></span><br><span class="line">                <span class="keyword">if</span> (me.isEventDirective(dir)) &#123;</span><br><span class="line">                    <span class="comment">// 在事件处理工具对象上找到处理函数</span></span><br><span class="line">                    compileUtil.eventHandler(node, me.$vm, exp, dir);</span><br><span class="line">                <span class="comment">// 否则进入普通指令</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// 如果指令处理工具对象上有处理指令对应的方法 则调用该方法</span></span><br><span class="line">                    compileUtil[dir] &amp;&amp; compileUtil[dir](node, me.$vm, exp);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 将元素上的指令属性移除</span></span><br><span class="line">                node.removeAttribute(attrName);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    compileText: <span class="function"><span class="keyword">function</span>(<span class="params">node, exp</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 使用指令处理结合中的text方法解析</span></span><br><span class="line">        <span class="comment">// node 为文本节点 exp 为正则匹配到的 &#123; &#123;  &#125; &#125; 中的内容</span></span><br><span class="line">        compileUtil.text(node, <span class="keyword">this</span>.$vm, exp);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    isDirective: <span class="function"><span class="keyword">function</span>(<span class="params">attr</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 通过 'v-' 判断属性节点是否是指令属性</span></span><br><span class="line">        <span class="keyword">return</span> attr.indexOf(<span class="string">'v-'</span>) == <span class="number">0</span>;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    isEventDirective: <span class="function"><span class="keyword">function</span>(<span class="params">dir</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 通过 'on' 判断指令属性是否是事件指令</span></span><br><span class="line">        <span class="keyword">return</span> dir.indexOf(<span class="string">'on'</span>) === <span class="number">0</span>;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    isElementNode: <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 根据节点的nodeType判断节点是否为元素节点</span></span><br><span class="line">        <span class="keyword">return</span> node.nodeType == <span class="number">1</span>;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    isTextNode: <span class="function"><span class="keyword">function</span>(<span class="params">node</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> node.nodeType == <span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 包含多个指令处理方法的工具对象</span></span><br><span class="line"><span class="keyword">var</span> compileUtil = &#123;</span><br><span class="line">    text: <span class="function"><span class="keyword">function</span>(<span class="params">node, vm, exp</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bind(node, vm, exp, <span class="string">'text'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    html: <span class="function"><span class="keyword">function</span>(<span class="params">node, vm, exp</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.bind(node, vm, exp, <span class="string">'html'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 解析 v-model 指令</span></span><br><span class="line">    model: <span class="function"><span class="keyword">function</span>(<span class="params">node, vm, exp</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 实现初始化显示和创建对应watcher</span></span><br><span class="line">        <span class="keyword">this</span>.bind(node, vm, exp, <span class="string">'model'</span>);</span><br><span class="line">        <span class="keyword">var</span> me = <span class="keyword">this</span>;</span><br><span class="line">        <span class="comment">// 得到表达式的值</span></span><br><span class="line">        <span class="keyword">var</span> val = <span class="keyword">this</span>._getVMVal(vm, exp);</span><br><span class="line">        <span class="comment">// 给节点绑定input监听 (输入时触发)</span></span><br><span class="line">        node.addEventListener(<span class="string">'input'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 得到输入的最新值</span></span><br><span class="line">            <span class="keyword">var</span> newValue = e.target.value;</span><br><span class="line">            <span class="comment">// 如果没有变化则直接返回</span></span><br><span class="line">            <span class="keyword">if</span> (val === newValue) &#123;</span><br><span class="line">                <span class="keyword">return</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// 将最新的值保存到表达式对应的data中的属性中</span></span><br><span class="line">            me._setVMVal(vm, exp, newValue);</span><br><span class="line">            <span class="comment">// 保存最新值 以便下次输入时验证</span></span><br><span class="line">            val = newValue;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    class: function(node, vm, exp) &#123;</span><br><span class="line">        <span class="keyword">this</span>.bind(node, vm, exp, <span class="string">'class'</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// node 待操作的节点, vm MVVM的实例对象, exp &#123; &#123;  &#125; &#125; 中的内容, dir 指令名称</span></span><br><span class="line">    bind: <span class="function"><span class="keyword">function</span>(<span class="params">node, vm, exp, dir</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 拼接[ ]内的字符串 从而在 updataer 中找到对应指令操作的方法保存到 updaterFn 中</span></span><br><span class="line">        <span class="keyword">var</span> updaterFn = updater[dir + <span class="string">'Updater'</span>];</span><br><span class="line">        <span class="comment">// &amp;&amp; 操作符 如果前面为 false 直接跳过, 如果都为 ture 则执行后面的语句</span></span><br><span class="line">        <span class="comment">// 使用 node 节点 和 vm实例上找到的属性的值 调用上面保存的函数</span></span><br><span class="line">        updaterFn &amp;&amp; updaterFn(node, <span class="keyword">this</span>._getVMVal(vm, exp));</span><br><span class="line">        <span class="comment">// 为表达式创建一个对应的watcher, 实现节点的更新显示</span></span><br><span class="line">        <span class="keyword">new</span> Watcher(vm, exp, <span class="function"><span class="keyword">function</span>(<span class="params">value, oldValue</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 当表达式对应的一个属性值变化时 更新页面中的相关节点</span></span><br><span class="line">            updaterFn &amp;&amp; updaterFn(node, value, oldValue);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 事件处理</span></span><br><span class="line">    eventHandler: <span class="function"><span class="keyword">function</span>(<span class="params">node, vm, exp, dir</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 用 : 分割指令字符串,取下标1部分 (click)</span></span><br><span class="line">        <span class="keyword">var</span> eventType = dir.split(<span class="string">':'</span>)[<span class="number">1</span>];</span><br><span class="line">        <span class="comment">// 如果 vm实例上 methods 不为空 则取出方法名为[show]的方法 保存在 fn 上</span></span><br><span class="line">        <span class="keyword">var</span> fn = vm.$options.methods &amp;&amp; vm.$options.methods[exp];</span><br><span class="line">        <span class="comment">//  如果指令和函数都存在 则绑定事件监听</span></span><br><span class="line">        <span class="keyword">if</span> (eventType &amp;&amp; fn) &#123;</span><br><span class="line">            <span class="comment">// 指定 vm 调用 fn 函数, 与call apply不同的是 bind 绑定不会立即执行</span></span><br><span class="line">            node.addEventListener(eventType, fn.bind(vm), <span class="literal">false</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 在 vm 实例里取出对应数据的值</span></span><br><span class="line">    _getVMVal: <span class="function"><span class="keyword">function</span>(<span class="params">vm, exp</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> val = vm;</span><br><span class="line">        <span class="comment">// &#123; &#123;  &#125; &#125; 中的内容可能存在 a.b.c 的写法 所以需要先拆分该字符串</span></span><br><span class="line">        exp = exp.split(<span class="string">'.'</span>);</span><br><span class="line">        <span class="comment">// 遍历拆分后的数组</span></span><br><span class="line">        exp.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">k</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 遍历完毕后 val 的值相当于 vm[a][b][c]</span></span><br><span class="line">            val = val[k];</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="comment">// 返回最后找到的属性的值</span></span><br><span class="line">        <span class="keyword">return</span> val;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    _setVMVal: <span class="function"><span class="keyword">function</span>(<span class="params">vm, exp, value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> val = vm;</span><br><span class="line">        exp = exp.split(<span class="string">'.'</span>);</span><br><span class="line">        exp.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">k, i</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 非最后一个key，更新val的值</span></span><br><span class="line">            <span class="keyword">if</span> (i &lt; exp.length - <span class="number">1</span>) &#123;</span><br><span class="line">                val = val[k];</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                val[k] = value;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更节点的方法对象</span></span><br><span class="line"><span class="keyword">var</span> updater = &#123;</span><br><span class="line">    <span class="comment">// 用找到的属性值替换节点的文本内容</span></span><br><span class="line">    textUpdater: <span class="function"><span class="keyword">function</span>(<span class="params">node, value</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 如果值为 undefined 则显示为 ''</span></span><br><span class="line">        node.textContent = <span class="keyword">typeof</span> value == <span class="string">'undefined'</span> ? <span class="string">''</span> : value;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 用找到的属性值替换节点的 innerHTML</span></span><br><span class="line">    htmlUpdater: <span class="function"><span class="keyword">function</span>(<span class="params">node, value</span>) </span>&#123;</span><br><span class="line">        node.innerHTML = <span class="keyword">typeof</span> value == <span class="string">'undefined'</span> ? <span class="string">''</span> : value;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 用找到的属性值替换节点的 class</span></span><br><span class="line">    classUpdater: <span class="function"><span class="keyword">function</span>(<span class="params">node, value, oldValue</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 先取出原有的 class 保存</span></span><br><span class="line">        <span class="keyword">var</span> className = node.className;</span><br><span class="line">        <span class="comment">// 用空串替换掉 undefined 和 结尾的空格</span></span><br><span class="line">        className = className.replace(oldValue, <span class="string">''</span>).replace(<span class="regexp">/\s$/</span>, <span class="string">''</span>);</span><br><span class="line">        <span class="comment">// 根据 原本的class 和 表达式的class 决定是否需要空格</span></span><br><span class="line">        <span class="keyword">var</span> space = className &amp;&amp; <span class="built_in">String</span>(value) ? <span class="string">' '</span> : <span class="string">''</span>;</span><br><span class="line">        <span class="comment">// 给节点设置新的 class 值</span></span><br><span class="line">        node.className = className + space + value;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    modelUpdater: <span class="function"><span class="keyword">function</span>(<span class="params">node, value, oldValue</span>) </span>&#123;</span><br><span class="line">        node.value = <span class="keyword">typeof</span> value == <span class="string">'undefined'</span> ? <span class="string">''</span> : value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="observer"><a href="#observer" class="headerlink" title="observer"></a>observer</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Observer</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 将 data 保存在实例的data属性中</span></span><br><span class="line">    <span class="keyword">this</span>.data = data;</span><br><span class="line">    <span class="comment">// 调用该构造函数的walk方法, 开始监视data</span></span><br><span class="line">    <span class="keyword">this</span>.walk(data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Observer.prototype = &#123;</span><br><span class="line">    <span class="comment">// 传入 data对象</span></span><br><span class="line">    walk: <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 保存 observer对象</span></span><br><span class="line">        <span class="keyword">var</span> me = <span class="keyword">this</span>;</span><br><span class="line">        <span class="comment">// 取出data中所有的属性名组成一个数组,然后遍历</span></span><br><span class="line">        <span class="built_in">Object</span>.keys(data).forEach(<span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123;</span><br><span class="line">            <span class="comment">// 使用遍历出的 属性名 和 属性值 调用 转换方法</span></span><br><span class="line">            me.convert(key, data[key]);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    convert: <span class="function"><span class="keyword">function</span>(<span class="params">key, val</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 对指定数据实现响应式数据绑定</span></span><br><span class="line">        <span class="keyword">this</span>.defineReactive(<span class="keyword">this</span>.data, key, val);</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 实现数据绑定 (data对象, 对象里数据的key 和 value)</span></span><br><span class="line">    defineReactive: <span class="function"><span class="keyword">function</span>(<span class="params">data, key, val</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 创建属性对应的 dep (dependency依赖)</span></span><br><span class="line">        <span class="keyword">var</span> dep = <span class="keyword">new</span> Dep();</span><br><span class="line">        <span class="comment">// 间接递归调用实现对data中的数据的所有层次的属性进行数据绑定</span></span><br><span class="line">        <span class="keyword">var</span> childObj = observe(val);</span><br><span class="line">        <span class="comment">// 给 data 对象重新定义当前属性 (为了给这个属性添加 get 和 set)</span></span><br><span class="line">        <span class="built_in">Object</span>.defineProperty(data, key, &#123;</span><br><span class="line">            enumerable: <span class="literal">true</span>, <span class="comment">// 可枚举</span></span><br><span class="line">            configurable: <span class="literal">false</span>, <span class="comment">// 不能再重新定义</span></span><br><span class="line">            get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (Dep.target) &#123;</span><br><span class="line">                    <span class="comment">// 建立关系</span></span><br><span class="line">                    dep.depend();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// 返回值</span></span><br><span class="line">                <span class="keyword">return</span> val;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="comment">// set 监视属性的变化 然后更新界面</span></span><br><span class="line">            set: <span class="function"><span class="keyword">function</span>(<span class="params">newVal</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (newVal === val) &#123;</span><br><span class="line">                    <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                val = newVal;</span><br><span class="line">                <span class="comment">// 新的值是object的话，进行监听</span></span><br><span class="line">                childObj = observe(newVal);</span><br><span class="line">                <span class="comment">// 通知所有相关的订阅者(watcher)</span></span><br><span class="line">                dep.notify();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 传入 data对象 和 vm实例对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observe</span>(<span class="params">value, vm</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 判断data对象是否存在, 类型是否为对象 (被观察的必须是一个对象)</span></span><br><span class="line">    <span class="keyword">if</span> (!value || <span class="keyword">typeof</span> value !== <span class="string">'object'</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 返回 data 对象传入Observer构造函数 生成的实例对象 (创建观察者)</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Observer(value);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> uid = <span class="number">0</span>;</span><br><span class="line"><span class="comment">// 1. 创建时机: 初始化 data 的属性进行数据劫持时创建的</span></span><br><span class="line"><span class="comment">// 2. 数量: 与 data 中的属性一一对应</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Dep</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// Dep里面有一个唯一id</span></span><br><span class="line">    <span class="keyword">this</span>.id = uid++;</span><br><span class="line">    <span class="comment">// 订阅者容器数组(里面存的Watcher)</span></span><br><span class="line">    <span class="keyword">this</span>.subs = [];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Dep.prototype = &#123;</span><br><span class="line">    addSub: <span class="function"><span class="keyword">function</span>(<span class="params">sub</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 添加 watcher到 dep 中</span></span><br><span class="line">        <span class="keyword">this</span>.subs.push(sub);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    depend: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 建立 dep 与 watcher 之间的关系</span></span><br><span class="line">        Dep.target.addDep(<span class="keyword">this</span>);</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    removeSub: <span class="function"><span class="keyword">function</span>(<span class="params">sub</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> index = <span class="keyword">this</span>.subs.indexOf(sub);</span><br><span class="line">        <span class="keyword">if</span> (index != <span class="number">-1</span>) &#123;</span><br><span class="line">            <span class="keyword">this</span>.subs.splice(index, <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    notify: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 遍历所有的 watcher 通知它更新</span></span><br><span class="line">        <span class="keyword">this</span>.subs.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">sub</span>) </span>&#123;</span><br><span class="line">            sub.update();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Dep.target = <span class="literal">null</span>;</span><br></pre></td></tr></table></figure>
<h3 id="watcher"><a href="#watcher" class="headerlink" title="watcher"></a>watcher</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. 创建时机: 初始化的解析大括号表达式/一般指令</span></span><br><span class="line"><span class="comment">// 2. 数量: 与模板中 表达式数量一一对应 (不包含事件指令)</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Watcher</span>(<span class="params">vm, expOrFn, cb</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// cb 更新界面的回调函数</span></span><br><span class="line">    <span class="keyword">this</span>.cb = cb;</span><br><span class="line">    <span class="comment">// vm 实例对象</span></span><br><span class="line">    <span class="keyword">this</span>.vm = vm;</span><br><span class="line">    <span class="comment">// expOrFn 插值表达式的值</span></span><br><span class="line">    <span class="keyword">this</span>.expOrFn = expOrFn;</span><br><span class="line">    <span class="comment">//  包含多个相关 Dep 的容器对象</span></span><br><span class="line">    <span class="keyword">this</span>.depIds = &#123;&#125;;</span><br><span class="line">    <span class="comment">// 判断 插值表达式的类型</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> expOrFn === <span class="string">'function'</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.getter = expOrFn;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.getter = <span class="keyword">this</span>.parseGetter(expOrFn);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 得到表达式的初始值保存</span></span><br><span class="line">    <span class="keyword">this</span>.value = <span class="keyword">this</span>.get();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Watcher.prototype = &#123;</span><br><span class="line">    update: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.run();</span><br><span class="line">    &#125;,</span><br><span class="line">    run: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value = <span class="keyword">this</span>.get();</span><br><span class="line">        <span class="keyword">var</span> oldVal = <span class="keyword">this</span>.value;</span><br><span class="line">        <span class="keyword">if</span> (value !== oldVal) &#123;</span><br><span class="line">            <span class="keyword">this</span>.value = value;</span><br><span class="line">            <span class="comment">// 调用回调函数 更新界面</span></span><br><span class="line">            <span class="keyword">this</span>.cb.call(<span class="keyword">this</span>.vm, value, oldVal);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    addDep: <span class="function"><span class="keyword">function</span>(<span class="params">dep</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 根据pep的ID在depIds里是否存在 来判断关系是否已经建立</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.depIds.hasOwnProperty(dep.id)) &#123;</span><br><span class="line">            <span class="comment">// 将watcher添加到dep中去 (用于更新)</span></span><br><span class="line">            dep.addSub(<span class="keyword">this</span>);</span><br><span class="line">            <span class="comment">// 根据dep的id在watcher里保存dep (用于防止反复建立关系)</span></span><br><span class="line">            <span class="keyword">this</span>.depIds[dep.id] = dep;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    get: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// 给dep指定当前的watcher</span></span><br><span class="line">        Dep.target = <span class="keyword">this</span>;</span><br><span class="line">        <span class="comment">// 获取表达式的值, 内部调用get建立dep与watcher的关系</span></span><br><span class="line">        <span class="keyword">var</span> value = <span class="keyword">this</span>.getter.call(<span class="keyword">this</span>.vm, <span class="keyword">this</span>.vm);</span><br><span class="line">        <span class="comment">// 出去dep中指定的当前watcher</span></span><br><span class="line">        Dep.target = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    parseGetter: <span class="function"><span class="keyword">function</span>(<span class="params">exp</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="regexp">/[^\w.$]/</span>.test(exp)) <span class="keyword">return</span>; </span><br><span class="line"></span><br><span class="line">        <span class="keyword">var</span> exps = exp.split(<span class="string">'.'</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = exps.length; i &lt; len; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!obj) <span class="keyword">return</span>;</span><br><span class="line">                obj = obj[exps[i]];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> obj;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="vue-cli"><a href="#vue-cli" class="headerlink" title="@vue/cli"></a>@vue/cli</h2><p><code>npm install -g @vue/cli</code>          安装</p>
<p><code>vue create hello-world</code>            新建项目</p>
<p><code>npm install</code>                                   安装依赖</p>
<p><code>npm run serve</code>                               开发环境运行 (在内存中 编译 打包 运行)</p>
<p><code>npm run build</code>                               生产环境打包</p>
<p><code>npm run lint</code>                                  一键格式化</p>
<ul>
<li><p>快速原型开发</p>
<p>使用<code>vue serve</code>和<code>vue build</code>命令对单个<code>*.vue</code>文件进行快速原型开发</p>
</li>
</ul>
<h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><ul>
<li><p>Vuex 是什么</p>
<ol>
<li>简单来说就是对Vue应用中多个组件的共享状态进行集中式的管理 (读/写)</li>
<li>它采用集中式存储管理应用的所有组件的状态</li>
<li>并以相应的规则保证状态以一种可预测的方式发生变化</li>
</ol>
</li>
<li><p>状态自管理应用</p>
<ol>
<li>state: 驱动应用的数据源 (<code>data</code>)</li>
<li>view: 以声明方式将state映射到视图</li>
<li>actions: 响应在view上用户驶入导致的状态变化(包n个更新状态的方法)</li>
</ol>
</li>
<li><p>多组件共享状态的问题</p>
<ol>
<li><p>多个视图依赖同一状态</p>
</li>
<li><p>来自不同视图的行为需要变更同一状态</p>
<ul>
<li><p>以前的办法:</p>
<ol>
<li>将数据以及操作数据的行为都定义在父组件</li>
<li>将其传递给需要的各个子组件 (可能需要多级传递)</li>
</ol>
</li>
<li><p><code>vuex</code>就是用来解决这些问题</p>
</li>
</ul>
</li>
</ol>
</li>
<li><p>vuex API</p>
<ul>
<li><p>state:  vuex管理的状态对象 (对象, 唯一)</p>
</li>
<li><p>mutations: </p>
<ol>
<li>包含多个直接更新<code>state</code>的方法(回调函数)的对象</li>
<li>在<code>action</code>使用<code>commit(mutation名称)</code>触发</li>
<li>只能包含同步的代码, <strong>不能异步</strong></li>
</ol>
</li>
<li><p>actions:</p>
<ol>
<li>包含多个事件回调函数的对象</li>
<li>在实例中通过<code>this.$store.dispatch(&#39;actionName&#39;, &#39;参数&#39;)</code>分发调用<code>action</code></li>
<li>通过执行<code>commit()</code>来触发<code>mutation</code>的调用间接更新<code>state</code></li>
<li>异步代码在此执行</li>
</ol>
</li>
<li><p>getters:</p>
<ol>
<li>包含多个计算属性(get)的对象</li>
<li>使用方法<code>this.$store.getters.xxx</code></li>
<li><code>getter</code>计算属性 第一个参数为<code>state</code></li>
</ol>
</li>
<li><p>modules:</p>
<ol>
<li>包含多个<code>module</code></li>
<li>一个<code>module</code>是一个<code>store</code>的配置对象</li>
<li>与一个组件(包含有共享数据)对应</li>
</ol>
</li>
</ul>
</li>
<li><p>使用:</p>
<ol>
<li><code>Vue.use(Vuex)</code>  使用插件</li>
<li>配置对象</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 对应data</span></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line">    count: <span class="number">0</span>,</span><br><span class="line">    msg: <span class="string">'test'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对应methods</span></span><br><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">    [MUTATIONSNAME1] (state) &#123;</span><br><span class="line">        state.count++</span><br><span class="line">    &#125;,</span><br><span class="line">    [MUTATIONSNAME2] (state) &#123;</span><br><span class="line">        state.count--</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 用 $store.dipatch()分发 action</span></span><br><span class="line"><span class="comment">// 用 &#123;commit&#125; 来调用对应的 mutation()</span></span><br><span class="line"><span class="keyword">const</span> actions = &#123;</span><br><span class="line">    <span class="comment">// 可以使用 state 里面的数据</span></span><br><span class="line">    <span class="comment">// 可以直接写异步代码 </span></span><br><span class="line">    increment (&#123;commit, state&#125;) &#123;</span><br><span class="line">        commit(<span class="string">'INCREMENT'</span>, <span class="string">'mutation的实参'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 对应Vue中的computed</span></span><br><span class="line"><span class="keyword">const</span> getters = &#123;</span><br><span class="line">    evenShow (state) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">'vuex自动寻找state'</span> + state.msg</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>暴露 store 对象</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state,  <span class="comment">//初始状态</span></span><br><span class="line">    mutations,  <span class="comment">//包含多个更新state函数的对象</span></span><br><span class="line">    actions,  <span class="comment">//包含多个事件回调函数的对象</span></span><br><span class="line">    getters <span class="comment">//包含多个getter计算属性函数的对象</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>在实例中映射<code>store</code></li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">	store</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="vue-router"><a href="#vue-router" class="headerlink" title="vue-router"></a>vue-router</h2><ul>
<li><p>后端路由</p>
<p>对于普通网站所有的超链接都是URL地址, 所有的URL地址在服务器上有对应的资源</p>
</li>
<li><p>前端路由</p>
<ol>
<li>对于单页应用来说, 主要通过URL中的<code>hash (#)</code>来实现不同页面之间的切换</li>
<li>同时<code>hash</code>有一个特点<code>http</code>请求中不会包含<code>hash</code>相关内容</li>
<li>所以单页应用中的页面跳转主要用<code>hash</code>来实现切换页面的方式叫做前端路由</li>
</ol>
</li>
<li><p><code>$router</code>:  路由器对象, 包含一些操作路由的功能函数, 来实现编程式导航(跳转路由)</p>
</li>
<li><p><code>$route</code>:  当前路由对象, 一些当前路由信息数据的容器(<code>path/meta/query/params</code>)</p>
</li>
<li><p>路由传参:</p>
<ol>
<li><p>在路由中使用 查询字符串 不影响路由匹配</p>
</li>
<li><p><code>query</code>查询:  <code>?</code>开始 <code>&amp;</code>连接多个查询内容</p>
<blockquote>
<p>参数保存在<code>$router.query</code></p>
</blockquote>
</li>
<li><p><code>params</code>查询:  在路由路径中提前用<code>:</code>占位</p>
<blockquote>
<p>参数保存在<code>$route.params</code></p>
</blockquote>
</li>
</ol>
</li>
<li><p>html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- vue-router 提供的组件展示的占位符 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- router-link 默认渲染为一个 a 标签 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- router-link 上加点击事件 @click.native --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 在路由地址相对的位置写入的参数 就能传递给提前配置好的占位符 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 也可以使用 tag 设置标签 replace设置替换跳转--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/login/lululu"</span> <span class="attr">replace</span>&gt;</span>登录<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">"/reg?id=10&amp;name=test"</span> <span class="attr">tag</span>=<span class="string">"span"</span>&gt;</span>注册<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>路由组件懒加载 引入方法</p>
<blockquote>
<p><code>const componentName = () =&gt; import(&#39;路径&#39;)</code></p>
</blockquote>
</li>
<li><p>创建一个路由对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> routerObj = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    <span class="comment">// 配置对象中的 route 表示 路由匹配规则</span></span><br><span class="line">    routes: [</span><br><span class="line">        <span class="comment">// path: 表示监听的路由地址</span></span><br><span class="line">        <span class="comment">// component: 表示该地址需要展示的组件 (里面放的是组件模板对象, 不能放模板名称)</span></span><br><span class="line">        <span class="comment">// redirect 重定向 用重定向地址替换 path 地址</span></span><br><span class="line">        &#123;<span class="attr">path</span>: <span class="string">"/"</span>, <span class="attr">redirect</span>: <span class="string">"/login"</span>&#125;,</span><br><span class="line">        <span class="comment">// 路由params查询</span></span><br><span class="line">        <span class="comment">//      使用 :xxx 来占位, 由 $route.params.xxx 接收路由上该位置的字符串</span></span><br><span class="line">        &#123;<span class="attr">path</span>: <span class="string">"/login/:xxx"</span>, <span class="attr">component</span>: login&#125;,</span><br><span class="line">        &#123;<span class="attr">path</span>: <span class="string">"/reg"</span>, <span class="attr">component</span>: reg&#125;,</span><br><span class="line">    ],</span><br><span class="line">    <span class="comment">// 自定义 激活组件的 class 类名</span></span><br><span class="line">    linkActiveClass: <span class="string">"myclass"</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>映射到实例</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">	router: routerObj</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>路由嵌套</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 命名视图 default --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 匹配命名视图里的配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">name</span>=<span class="string">"leftView"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">router-view</span> <span class="attr">name</span>=<span class="string">"mainView"</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    routes: [</span><br><span class="line">        &#123;   </span><br><span class="line">            path: <span class="string">"/"</span>, </span><br><span class="line">            <span class="comment">// components 配置命名视图(注意有s)</span></span><br><span class="line">            <span class="comment">// 属性名是标签中的 name标识</span></span><br><span class="line">            <span class="comment">// 属性值对应显示的模板名称</span></span><br><span class="line">            components: &#123;</span><br><span class="line">                <span class="keyword">default</span>: head,</span><br><span class="line">                leftView: left,</span><br><span class="line">                mainView: main</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// 常规路由 component 后面不加s</span></span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">"/children"</span>,</span><br><span class="line">            component: children</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//  嵌套路由 在 children : [] 里配置子路由</span></span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">"/main"</span>,</span><br><span class="line">            component: main,</span><br><span class="line">            children: [</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">//  子路由嵌套 path 不加 / </span></span><br><span class="line">                    <span class="comment">//  / 代表根路径</span></span><br><span class="line">                    path: <span class="string">"children"</span>,</span><br><span class="line">                    component: children</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">ajax</span>(<span class="params">data = &#123;&#125;, url, type</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="keyword">function</span>(<span class="params">resolve, reject</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> promise;</span><br><span class="line">    <span class="keyword">if</span> (type === <span class="string">'GET'</span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> dataStr = <span class="string">''</span>;</span><br><span class="line">      <span class="built_in">Object</span>.keys(data).forEach(<span class="function"><span class="params">key</span> =&gt;</span> &#123;</span><br><span class="line">        dataStr += key + <span class="string">'='</span> + data[key] + <span class="string">'&amp;'</span>;</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">if</span> (dataStr !== <span class="string">''</span>) &#123;</span><br><span class="line">        dataStr = dataStr.substring(<span class="number">0</span>, dataStr.lastIndexOf(<span class="string">'&amp;'</span>));</span><br><span class="line">        url = url + <span class="string">'?'</span> + dataStr;</span><br><span class="line">      &#125;</span><br><span class="line">      promise = axios.get(url);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 设置 content-type 解决 options 问题</span></span><br><span class="line">      promise = axios(&#123;</span><br><span class="line">        method: <span class="string">'post'</span>,</span><br><span class="line">        url: url,</span><br><span class="line">        data: data,</span><br><span class="line">        headers: &#123;<span class="string">'Content-Type'</span>: <span class="string">'application/x-www-form-urlencoded'</span>&#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    promise.then(<span class="function"><span class="params">response</span> =&gt;</span> &#123;</span><br><span class="line">      resolve(response.data);</span><br><span class="line">    &#125;).catch(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">      reject(error);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="UI组件库"><a href="#UI组件库" class="headerlink" title="UI组件库"></a>UI组件库</h2><ul>
<li><p>Mint UI 饿了么开源移动端UI组件库</p>
</li>
<li><p>Elment 饿了么开源PC端UI组件库</p>
<ol>
<li><p>引入需要的组件</p>
<p><code>import {Button, Toast} from &#39;mint-ui&#39;</code></p>
</li>
<li><p>注册成标签 (全局注册, 所有组件都能使用)</p>
<p><code>Vue.component(&#39;标签名&#39;, 模板)</code></p>
</li>
</ol>
</li>
<li><p>vue-lazyload</p>
<p><code>npm install --save vue-lazyload</code></p>
<p>使用<code>v-lazy</code>指令代替<code>src</code>指定路径, 可使图片懒加载</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> VueLazyload <span class="keyword">from</span> <span class="string">'vue-lazyload'</span></span><br><span class="line"><span class="comment">// 内部自定义一个指令 v-lazy</span></span><br><span class="line">Vue.use(VueLazyload, &#123;</span><br><span class="line">	<span class="comment">// 图片加载时显示图片</span></span><br><span class="line">    loading: <span class="string">'dist/loading.gif'</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/自学笔记/" rel="tag"><i class="fa fa-tag"></i> 自学笔记</a>
          
            <a href="/tags/vue/" rel="tag"><i class="fa fa-tag"></i> vue</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/09/12/JavaScript笔记/" rel="next" title="JavaScript笔记">
                <i class="fa fa-chevron-left"></i> JavaScript笔记
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/09/16/Git常用命令/" rel="prev" title="Git常用命令">
                Git常用命令 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
      
      <div class="my_post_copyright">
        <p><span>本文标题: </span><a href="/2018/09/15/Vue笔记/">Vue笔记</a></p>
        <p><span>文章作者: </span><a href="/" title="访问 无聊大作战 的个人博客">无聊大作战</a></p>
        <p><span>发布时间: </span>2018年09月15日 - 23:09</p>
        <p><span>最后更新: </span>2018年09月16日 - 06:09</p>
        <p><b>转载请注明出处，谢谢！</b></p>
      </div>
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            博主信息
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="无聊大作战">
            
              <p class="site-author-name" itemprop="name">无聊大作战</p>
              <p class="site-description motion-element" itemprop="description">半路出家，自学前端半年</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">6</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">13</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="https://github.com/Se7suna" target="_blank" title="GitHub" rel="external nofollow noopener noreferrer"><i class="fa fa-fw fa-github"></i>GitHub</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="http://wpa.qq.com/msgrd?v=3&uin=381897638&site=qq&menu=yes" target="_blank" title="QQ" rel="external nofollow noopener noreferrer"><i class="fa fa-fw fa-qq"></i>QQ</a>
                  
                </span>
              
            </div>
          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue"><span class="nav-text">Vue</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue基础"><span class="nav-text">Vue基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MVVM"><span class="nav-text">MVVM</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模板"><span class="nav-text">模板</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例"><span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事件修饰符"><span class="nav-text">事件修饰符</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#双向数据绑定"><span class="nav-text">双向数据绑定</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-for-循环"><span class="nav-text">v-for 循环</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-if和v-show"><span class="nav-text">v-if和v-show</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue设置style"><span class="nav-text">Vue设置style</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue设置class"><span class="nav-text">Vue设置class</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义过滤器"><span class="nav-text">自定义过滤器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义指令"><span class="nav-text">自定义指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vue生命周期"><span class="nav-text">Vue生命周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#过渡动画"><span class="nav-text">过渡动画</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#钩子函数动画"><span class="nav-text">钩子函数动画</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#列表动画效果"><span class="nav-text">列表动画效果</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组件化"><span class="nav-text">组件化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组件切换"><span class="nav-text">组件切换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#props"><span class="nav-text">props</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义事件"><span class="nav-text">自定义事件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ref获取DOM元素"><span class="nav-text">ref获取DOM元素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#计算属性"><span class="nav-text">计算属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#watch监视"><span class="nav-text">watch监视</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#solt插槽"><span class="nav-text">solt插槽</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#原理分析"><span class="nav-text">原理分析</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#数据代理"><span class="nav-text">数据代理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#模块解析"><span class="nav-text">模块解析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据绑定"><span class="nav-text">数据绑定</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#原理代码注释"><span class="nav-text">原理代码注释</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#mvvm"><span class="nav-text">mvvm</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#compile"><span class="nav-text">compile</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#observer"><span class="nav-text">observer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#watcher"><span class="nav-text">watcher</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue-cli"><span class="nav-text">@vue/cli</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Vuex"><span class="nav-text">Vuex</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue-router"><span class="nav-text">vue-router</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#axios"><span class="nav-text">axios</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UI组件库"><span class="nav-text">UI组件库</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">无聊大作战</span>

  

  
</div>







<div class="powered-by">
<span id="busuanzi_container_site_uv">
  访客数 : <span id="busuanzi_value_site_uv"></span>  
</span>
<span id="busuanzi_container_page_pv">
    访问量 : <span id="busuanzi_value_page_pv"></span>
</span>
</div>
        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.4.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.1"></script>



  



  










  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  

  

  

  

  

<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"position":"left","width":100,"height":150},"mobile":{"show":false},"log":false});</script></body>
</html>
